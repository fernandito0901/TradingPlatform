# Planning Notes - P011

## Automated Scheduling and Deployment

With the portfolio tracker and web interface working, the next step is to simplify running the platform daily. We'll add a lightweight scheduler and deployment instructions.

### Goals
1. Provide a daily pipeline schedule that can be toggled on or off from the webapp.
2. Ship `docker-compose.yml` so users can deploy the web interface and background scheduler together.
3. Document environment setup and how to start the services with one command.

### Architecture
The scheduler runs as a standalone process that loads environment variables via `load_env` and starts an APScheduler `BackgroundScheduler`. It schedules `run_daily()` using the `SCHEDULE_CRON` expression (default "0 7 * * *"). Setting this value empty disables scheduling.

### Docker Compose Setup
A `docker-compose.yml` file will define two services:
1. `web` – runs the Flask web interface on port 5000.
2. `scheduler` – runs `python -m trading_platform.scheduler` using the same image.

Both containers share volumes for data and reports and read environment variables from `.env`. Launch with:
```bash
docker compose up -d
```

### Tasks
- **T77** – @Planner outline scheduler architecture and compose services.
- **T78** – @Coder implement `scheduler.py` using APScheduler to call `run_daily`.
- **T79** – @Synthesizer integrate scheduler control into the webapp UI.
- **T80** – @Reviewer document deployment and scheduling workflow in the README.
- **T81** – @Tester add tests ensuring the scheduler triggers `run_daily`.
