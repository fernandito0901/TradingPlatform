# Planning Notes - P013

## Real-time Position Management

To track live trades and recommend timely actions, the platform needs to monitor market data for open positions, simulate exits and notify the user when conditions are met.

### Goals
1. Stream real-time quotes for symbols currently held in the portfolio.
2. Evaluate open positions against stop-loss and take-profit rules.
3. Record executed trades automatically in the portfolio tracker.
4. Simulate exit orders to keep running PnL updated.
5. Send alerts advising when to exit or enter positions.

### Approach

1. **Quote streaming** – a background service subscribes to a WebSocket feed for
   all symbols listed in `portfolio.csv` and records quotes in the database.
2. **Position evaluator** – periodically compare live prices against stop-loss
   and take-profit levels for each open position. When a threshold is met emit a
   signal for alerting and optional automated exit.
3. **Automatic trade recording** – the broker interface appends filled orders to
   `portfolio.csv` immediately so manual updates are unnecessary.
4. **Exit simulation** – calculate hypothetical exit PnL using the latest quote
   for still-open trades and store this running value.
5. **Alert notifications** – on entry or exit signals send a Slack message with
   the suggested action and price.

### Tasks
- **T87** – @DataCollector implement streaming module for portfolio symbols.
- **T88** – @Coder build evaluation engine computing exit signals and updating tracker.
- **T89** – @Synthesizer integrate automatic trade saving to `portfolio.csv` after executions.
- **T90** – @Modeler design exit simulation algorithm updating PnL.
- **T91** – @DataCollector send real-time alerts when exit or entry triggers fire.
- **T92** – @Reviewer document real-time monitoring workflow in README.
